(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var o=0;o<n.length;o++){var r=n[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===t(i)?i:String(i)),r)}var i}var n=function(){function t(e,n,o,r,i,u,a,c,l,s,p){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._cardName=e,this._cardLink=n,this._ownerId=o,this._currentUserId=c,this._tempElementSelector=u,this._handleCardClick=a,this._api=l,this._cardId=r,this._likes=i,this._deleteCard=this._deleteCard.bind(this),this._addReaction=this._addReaction.bind(this),this.createCard=this.createCard.bind(this),this.toggleButtonTextLoader=s,this.formEditProfile=p}var n,o;return n=t,(o=[{key:"_createEmptyCard",value:function(t){this._tempElement=document.querySelector(t).content,this._createdCard=this._tempElement.querySelector(".element").cloneNode(!0)}},{key:"_fillEmptyCard",value:function(t){return this._createdCardImg=t.querySelector(".element__img"),this._likeCounter=t.querySelector(".element__like-counter"),this._likeButton=t.querySelector(".element__like-button"),t.querySelector(".element__name").textContent=this._cardName,this._createdCardImg.src=this._cardLink,this._createdCardImg.alt=this._cardName,this._likeCounter.textContent=this._likes.length,this._currentUserId!=this._ownerId&&null!=this._cardId&&(t.querySelector(".element__delete-button").style.visibility="hidden"),this._isLiked()&&this._likeButton.classList.toggle("element__like-button_is-liked"),this._likeCounter}},{key:"_isLiked",value:function(){var t=this;return this._liked=this._likes.some((function(e){return e._id===t._currentUserId})),this._liked}},{key:"_addEventListeners",value:function(t,e){this._createdCard.querySelector(t).addEventListener("click",(function(t){e(t)}))}},{key:"_toggleLikeButton",value:function(t){t.target.classList.toggle("element__like-button_is-liked")}},{key:"_addReaction",value:function(t){var e=this;this._isLiked()?this._api.deleteLike(this._cardId).then((function(t){e._likeCounter.textContent=t.likes.length,e._likes=t.likes,console.log(e._likeCounter.textContent)})).then((function(){e._toggleLikeButton(t),console.log("dislike")})).catch((function(t){return console.log("не удалось снять лайк ".concat(t))})):this._api.addLike(this._cardId).then((function(t){e._likeCounter.textContent=t.likes.length,e._likes=t.likes})).then((function(){e._toggleLikeButton(t),console.log("like")})).catch((function(t){return console.log("не удалось поставить лайк ".concat(t))}))}},{key:"_deleteCard",value:function(t){this._api.deleteElement(this._cardId).then((function(){t.target.closest(".element").remove()})).catch((function(t){return console.log("не удалось удалить карточку")}))}},{key:"_setEventListeners",value:function(){var t=this;this._addEventListeners(".element__like-button",this._addReaction),this._addEventListeners(".element__delete-button",this._deleteCard),this._addEventListeners(".element__img",(function(e){t._handleCardClick(e)}))}},{key:"createCard",value:function(){return this._createEmptyCard(this._tempElementSelector),this._fillEmptyCard(this._createdCard),this._setEventListeners(),this._createdCard}},{key:"saveCard",value:function(){var t=this;this._api.addElement({name:this._cardName,link:this._cardLink}).then((function(e){return t.toggleButtonTextLoader(t.formEditProfile,"Сохранение..."),e})).then((function(e){t._cardId=e._id,t._ownerId=e.ownerId,t._likes=e.likes,t._currentUserId=e.owner._id})).then((function(){return t.createCard()})).then((function(){t.toggleButtonTextLoader(t.formEditProfile,"Сохранить")})).catch((function(t){console.log("Ошибка загрузки карты на сервер ".concat(t))}))}}])&&e(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),t}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===o(i)?i:String(i)),r)}var i}var i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._validData=e,this._form=n,this._inputList=Array.from(this._form.querySelectorAll(this._validData.inputSelector)),this._buttonElement=this._form.querySelector(this._validData.submitButtonSelector)}var e,n;return e=t,(n=[{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(t){t.preventDefault()})),this._setEventListeners()}},{key:"_setEventListeners",value:function(){var t=this;this._toggleButtonState(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._toggleButtonState(),t._checkInputValidity(e)}))}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputList)?this._disableSubmitButton():this._enableSubmitButton()}},{key:"_hasInvalidInput",value:function(t){return t.some((function(t){return!t.validity.valid}))}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_showInputError",value:function(t){this._errorElement=this._form.querySelector(".".concat(t.id,"-error")),t.classList.add(this._validData.inputErrorClass),this._errorElement.textContent=t.validationMessage,this._errorElement.classList.add(this._validData.errorClass)}},{key:"_hideInputError",value:function(t){this._errorElement=this._form.querySelector(".".concat(t.id,"-error")),this._removeValidationErrors(t),this._errorElement.classList.remove(this._validData.errorClass),this._errorElement.textContent=""}},{key:"_disableSubmitButton",value:function(){this._buttonElement.classList.add(this._validData.inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"_enableSubmitButton",value:function(){this._buttonElement.classList.remove(this._validData.inactiveButtonClass),this._buttonElement.disabled=!1}},{key:"resetValidation",value:function(){var t=this;this._inputList.forEach((function(e){t._hideInputError(e)})),this._disableSubmitButton()}},{key:"_removeValidationErrors",value:function(t){t.classList.remove(this._validData.inputErrorClass)}}])&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==u(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===u(r)?r:String(r)),o)}var r}var c=function(){function t(e,n){var o=e.data,r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._initialArray=o,this._renderer=r,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"_clear",value:function(){this._container.innerHTML=""}},{key:"createSection",value:function(){var t=this;this._initialArray.reduceRight((function(e,n){t._element=t._renderer(n)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&a(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function s(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==l(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==l(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===l(r)?r:String(r)),o)}var r}var p=function(){function t(e,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(".".concat(e)),this._handleEscClose=this._handleEscClose.bind(this),this._escKeyCode=n,this._openedPopupSelector=o}var e,n;return e=t,(n=[{key:"openPopup",value:function(){this._popup.classList.add(this._openedPopupSelector),document.addEventListener("keydown",this._handleEscClose)}},{key:"closePopup",value:function(){this._popup.classList.remove(this._openedPopupSelector),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){t.keyCode===this._escKeyCode&&this.closePopup()}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){e.target.classList.contains(t._openedPopupSelector)&&t.closePopup(),e.target.classList.contains("popup__close-button")&&t.closePopup()}))}}])&&s(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function d(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==f(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===f(r)?r:String(r)),o)}var r}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},h.apply(this,arguments)}function y(t,e){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},y(t,e)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(t){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_(t)}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}(u,t);var e,n,o,r,i=(o=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=_(o);if(r){var n=_(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return m(t)}(this,t)});function u(t,e,n,o,r){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(a=i.call(this,t,e,n))._openedPopupSelector=n,a._handleEscClose=a._handleEscClose.bind(m(a)),a.setEventListeners=a.setEventListeners.bind(m(a)),a._popupSelector=t,a._submitForm=r,a.openPopup=a.openPopup.bind(m(a)),a._validationConfig=o,a._addCardForm=a._popup.querySelector(a._validationConfig.formSelector),a._submit=a._submit.bind(m(a)),a.submitButton=a._popup.querySelector(a._validationConfig.submitButtonSelector),a._inputList=a._popup.querySelectorAll(".popup__text"),a}return e=u,(n=[{key:"_getInputValues",value:function(){var t=this;return this._item={},this._inputList.forEach((function(e){t._item[e.name.slice(5).toLowerCase()]=e.value})),this._item.likes=[],this._item}},{key:"setEventListeners",value:function(){h(_(u.prototype),"setEventListeners",this).call(this),this._addCardForm.addEventListener("submit",this._submit)}},{key:"closePopup",value:function(){h(_(u.prototype),"closePopup",this).call(this),this._addCardForm.reset()}},{key:"_submit",value:function(t){this.submitButton.classList.contains(this._validationConfig.inactiveButtonClass)||(t.preventDefault(),this._submitForm(this._getInputValues()))}}])&&d(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(p);function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function S(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==b(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==b(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===b(r)?r:String(r)),o)}var r}var g=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e,this._description=n}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return this.userInfo={name:this._name.textContent,description:this._description.textContent}}},{key:"setUserInfo",value:function(t,e){this._name.textContent=t,this._description.textContent=e}}])&&S(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function E(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==k(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==k(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===k(r)?r:String(r)),o)}var r}function w(){return w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},w.apply(this,arguments)}function P(t,e){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},P(t,e)}function C(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(t){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j(t)}var L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}(u,t);var e,n,o,r,i=(o=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=j(o);if(r){var n=j(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===k(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return C(t)}(this,t)});function u(t,e,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(o=i.call(this,t,e,n))._openedPopupSelector=n,o.popupSelector=t,o._handleEscClose=o._handleEscClose.bind(C(o)),o.setEventListeners=o.setEventListeners.bind(C(o)),o._popupImg=o._popup.querySelector(".".concat(o.popupSelector,"__img")),o._popupText=o._popup.querySelector(".".concat(o.popupSelector,"__name")),o}return e=u,(n=[{key:"openPopup",value:function(t){this._popupImg.src=t.src,this._popupImg.alt=t.alt,this._popupText.textContent=t.alt,w(j(u.prototype),"openPopup",this).call(this)}}])&&E(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(p),O="popup_is-opened",I={formSelector:".popup__content",inputSelector:".popup__text",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_inactive",inputErrorClass:"popup__text_type_error",errorClass:"popup__text-error_active",errorMessageClass:".popup__text-error"},T=".temp-element";function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function x(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==q(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==q(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===q(r)?r:String(r)),o)}var r}var B,R,D=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e.url,this.headers=e.headers}var e,n;return e=t,(n=[{key:"getAllElements",value:function(){return fetch(this.url,{method:"GET",headers:this.headers}).then((function(t){return t.ok?t.json():Promise.reject("произошла ошибка")}))}},{key:"addElement",value:function(t){return fetch(this.url,{method:"POST",headers:this.headers,body:JSON.stringify({name:t.name,link:t.link})}).then((function(t){return t.ok?t.json():Promise.reject("произошла ошибка")}))}},{key:"deleteElement",value:function(t){return fetch("".concat(this.url,"/").concat(t),{method:"DELETE",headers:this.headers}).then((function(t){return t.ok?t.json():Promise.reject("произошла ошибка")}))}},{key:"editProfile",value:function(t){return fetch(this.url,{method:"PATCH",headers:this.headers,body:JSON.stringify({name:t.name,about:t.description})}).then((function(t){return t.ok?t.json():Promise.reject("произошла ошибка")}))}},{key:"addLike",value:function(t){return fetch("".concat(this.url,"/").concat(t,"/likes"),{method:"PUT",headers:this.headers}).then((function(t){return t.ok?t.json():Promise.reject("произошла ошибка постановки лайка")}))}},{key:"deleteLike",value:function(t){return fetch("".concat(this.url,"/").concat(t,"/likes"),{method:"DELETE",headers:this.headers}).then((function(t){return t.ok?t.json():Promise.reject("произошла ошибка снятия лайка")}))}},{key:"editAvatar",value:function(t){return fetch("".concat(this.url,"/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:t})}).then((function(t){return t.ok?t.json():Promise.reject("произошла ошибка")}))}}])&&x(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),V=document.forms["form-profile"],A=document.querySelector(".profile__edit-button"),U=document.querySelector(".profile__add-button"),N=document.forms["form-content"],F=document.forms["form-avatar"],H=document.querySelector(".popup-photo"),J=(H.querySelector(".popup-photo__img"),H.querySelector(".popup-photo__name"),document.querySelector(".profile__name")),M=document.querySelector(".profile__description"),z=document.querySelector(".profile__avatar"),K=new i(I,V),G=new i(I,N),Q=new i(I,F),W=V.querySelector(".popup__text_type_name"),X=V.querySelector(".popup__text_type_description"),Y=document.querySelector(".profile__avatar-button"),Z=[],$={},tt={},et=new D({url:"https://mesto.nomoreparties.co/v1/cohort-62/users/me",headers:{"content-type":"application/json",authorization:"8fe21241-d4e3-40e9-bdfb-586c0b845bc2"}}),nt=new D({url:"https://mesto.nomoreparties.co/v1/cohort-62/cards",headers:{"content-type":"application/json",authorization:"8fe21241-d4e3-40e9-bdfb-586c0b845bc2"}});(R=et.getAllElements()).then((function(t){$=t,J.textContent=$.name,M.textContent=$.about,z.src=$.avatar})),R.then(((B=nt.getAllElements()).then((function(t){t.map((function(t){Z.push({name:t.name,description:t.link,ownerId:t.owner._id,likes:t.likes,id:t._id})}))})),B.then((function(){tt=new c({data:Z,renderer:function(t){tt.addItem(at(t).createCard())}},".elements")})),B.then((function(){tt.createSection()})),void console.log(Z))),K.enableValidation(),G.enableValidation(),Q.enableValidation();var ot=new L("popup-photo",27,O);function rt(t){var e=t.target;ot.openPopup(e)}ot.setEventListeners();var it=new g(J,M),ut=new v("popup_type_edit-profile",27,O,I,(function(t){et.editProfile(t).then((function(t){return lt(F,"Сохранение....."),t})).then((function(){it.setUserInfo(t.name,t.description)})).then((function(){ut.closePopup()})).then((function(){lt(F,"Сохранить")})).catch((function(t){console.log("не удалось сохранить новый профиль, Ошибка: ".concat(t))}))}));function at(t){return new n(t.name,t.description,t.ownerId,t.id,t.likes,T,rt,$._id,nt,lt,V)}ut.setEventListeners();var ct=new v("popup_type_add-card",27,O,I,(function(t){var e=at(t);e.saveCard(),tt.addItem(e.createCard()),ct.closePopup()}));function lt(t,e){t.querySelector(".popup__save-button").textContent=e}ct.setEventListeners();var st=new v("popup_type_avatar",27,O,I,(function(t){et.editAvatar(t.description).then((function(t){return lt(F,"Сохранение....."),t})).then((function(t){z.src=t.avatar})).then((function(){return st.closePopup()})).then((function(){lt(F,"Сохранить")})).catch((function(t){console.log("не удалось сохранить новый аватар, Ошибка: ".concat(t))}))}));st.setEventListeners(),A.addEventListener("click",(function(){var t=it.getUserInfo();W.value=t.name,X.value=t.description,K.resetValidation(),ut.openPopup()})),U.addEventListener("click",(function(){G.resetValidation(),ct.openPopup()})),Y.addEventListener("click",(function(){st.openPopup(),Q.resetValidation()}))})();